<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ðŸ’– Just One Question</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<style>
/* All your CSS from before, unchanged */
</style>
</head>
<body>
<div class="app">
  <button class="back hidden" id="backBtn">â¬… Back</button>
  <button class="toggle" onclick="toggleDark()">ðŸŒ™</button>
  <div class="card" id="screen"></div>
</div>

<!-- Include the editable content -->
<script src="site_content.js"></script>

<!-- Main JS logic (unchanged, but references SITE object from site_content.js) -->
<script>
let section=0,question=0,mode="start",autoScrollTimer=null,scrollDirection=1;
const history=[],screen=document.getElementById('screen'),backBtn=document.getElementById('backBtn');
const yesBtn=document.createElement('button'); yesBtn.id='yesBtn'; yesBtn.className='primary'; yesBtn.textContent='YES ðŸ’–';
const noBtn=document.createElement('button'); noBtn.id='noBtn'; noBtn.className='secondary'; noBtn.textContent='NO ðŸ˜…';

function toggleDark(){document.body.classList.toggle('dark')}
function setBG(){if(!document.body.classList.contains('dark'))document.body.style.background=SITE.sections[section]?.bg||"#fff"}
function playEffect(img,audio){if(audio)new Audio(audio).play().catch(()=>{}); if(img){const i=document.createElement('img');i.src=img;i.className='popup-img';document.body.appendChild(i);setTimeout(()=>i.remove(),3000);}}
function moveNoButton(){const box=noBtn.parentElement;if(!box)return; const maxX=box.clientWidth-noBtn.offsetWidth; const maxY=box.clientHeight-noBtn.offsetHeight; noBtn.style.left=Math.random()*maxX+"px"; noBtn.style.top=Math.random()*maxY+"px"; noBtn.style.transform="none";}
function save(){history.push({section,question,mode});backBtn.classList.remove('hidden')}
backBtn.onclick=()=>{if(!history.length)return; const h=history.pop(); section=h.section;question=h.question;mode=h.mode;render();if(!history.length)backBtn.classList.add('hidden')};

function render(){
  setBG();
  if(mode==="start")renderStart();
  else if(mode==="intro")renderIntro();
  else if(mode==="question")renderQuestion();
  else if(mode==="password")renderPassword();
  else if(mode==="final")renderFinal();
  else if(mode==="secret")renderSecret();
}

function renderStart(){screen.innerHTML=`<h1>${SITE.intro.title}</h1><p>${SITE.intro.message}</p><button class="primary" onclick="begin()">Start ðŸ’–</button>`}
function begin(){save();mode="intro";render()}
function renderIntro(){screen.innerHTML=`<h1>${SITE.sections[section].title}</h1><p>${SITE.sections[section].intro}</p><button class="primary" onclick="startQuestions()">Continue</button>`}
function startQuestions(){save();question=0;mode="question";render()}

function renderQuestion(){
  const q=SITE.sections[section].questions[question];
  screen.innerHTML=`<h1>${q.text}</h1><div class="buttons"></div>`;
  const box=screen.querySelector('.buttons'); box.append(yesBtn,noBtn); bindButtons();
}

function bindButtons(){
  yesBtn.onclick=()=>{
    const q=SITE.sections[section].questions[question]; playEffect(q.yesImage,q.yesAudio);
    save();question++;
    if(question<SITE.sections[section].questions.length){render();return;}
    section++;question=0;
    if(section>=SITE.sections.length){mode="final";render();return;}
    SITE.sections[section].passcode?renderPassword():renderIntro();
  };
  noBtn.onclick=()=>{
    moveNoButton();
    const s=SITE.sections[section];
    if(s.noAudio)new Audio(s.noAudio).play().catch(()=>{});
    toast(SITE.noClickMessages[Math.floor(Math.random()*SITE.noClickMessages.length)]);
  };
}

// The rest of your JS (password, final, secret, bursts) goes here unchanged...
render();
</script>
</body>
</html>