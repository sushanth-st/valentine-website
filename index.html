<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">

<!-- ‚úÖ CACHE BUSTING -->
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
<meta http-equiv="Pragma" content="no-cache">
<meta http-equiv="Expires" content="0">

<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>üíñ Just One Question</title>

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box}
html,body{height:100%;overflow:hidden}

body{
  margin:0;
  font-family:Poppins,sans-serif;
  display:flex;
  justify-content:center;
  align-items:center;
  transition:background 0.6s ease;
}

body.dark{background:linear-gradient(135deg,#16001a,#2b0036)!important}

.app{
  width:100%;
  max-width:420px;
  height:100%;
  padding:16px;
  display:flex;
  justify-content:center;
  align-items:center;
  position:relative;
}

.card{
  width:100%;
  background:#fff;
  border-radius:22px;
  padding:26px 22px;
  box-shadow:0 14px 40px rgba(0,0,0,.15);
  text-align:center;
}

body.dark .card{background:#2a0033;color:#fff}
body.dark p{color:#ddd}

h1{font-family:'Playfair Display',serif;font-size:1.9rem;margin:0 0 14px}
p{margin:0 0 14px;color:#555}

button{border:none;border-radius:999px;padding:14px 28px;font-size:1.05rem;cursor:pointer}
.primary{background:#ff5fa2;color:#fff}
.secondary{background:#ddd}

.buttons{margin-top:18px;height:140px;position:relative}

#yesBtn{position:absolute;left:50%;top:50%;transform:translate(-120%,-50%)}
#noBtn{position:absolute;left:50%;top:50%;transform:translate(20%,-50%)}

.back,.toggle{
  position:absolute;
  top:12px;
  padding:8px 14px;
  font-size:.85rem;
  background:#eee;
}
.back{left:12px}
.toggle{right:12px}
.hidden{display:none}

.toast{
  position:absolute;top:12px;left:50%;transform:translateX(-50%);
  background:#ff5fa2;color:#fff;padding:10px 18px;border-radius:20px;
  font-size:.9rem;z-index:30
}

/* IMAGE POPUP */
.popup-img{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  max-width:80%;
  border-radius:18px;
  box-shadow:0 18px 40px rgba(0,0,0,.3);
  opacity:0;
  animation:fadeImg 3s forwards;
  z-index:50;
}

@keyframes fadeImg{
  0%{opacity:0;transform:translate(-50%,-50%) scale(.9)}
  15%{opacity:1;transform:translate(-50%,-50%) scale(1)}
  85%{opacity:1}
  100%{opacity:0}
}

/* FINAL IMAGE SCROLL */
.final-scroll{
  max-height:55vh;
  overflow-y:auto;
  -webkit-overflow-scrolling:touch;
}

.final-scroll img{
  width:100%;
  border-radius:16px;
  margin-top:14px;
}
</style>
</head>

<body>

<div class="app">
  <button class="back hidden" id="backBtn">‚¨Ö Back</button>
  <button class="toggle" onclick="toggleDark()">üåô</button>
  <div class="card" id="screen"></div>
</div>

<script>
const SITE={
  sections:[
    {
      title:"Funny üòÑ",
      bg:"linear-gradient(135deg,#ffe4f2,#fff)",
      intro:"Let‚Äôs start easy üòú",
      questions:["Funny Q1","Funny Q2","Funny Q3","Funny Q4"],
      yesImage:"Images/funny-yes.jpg",
      yesAudio:"Audio/funny-yes.mp3",
      noImage:"Images/funny-no.jpg",
      noAudio:"Audio/funny-no.mp3"
    },
    {
      title:"Romantic üåπ",
      bg:"linear-gradient(135deg,#fff0f6,#ffe6f0)",
      intro:"Feel the romance üíï",
      questions:["Romantic Q1","Romantic Q2","Romantic Q3","Romantic Q4"],
      yesImage:"Images/romantic-yes.jpg",
      yesAudio:"Audio/romantic-yes.mp3",
      noImage:"Images/romantic-no.jpg",
      noAudio:"Audio/romantic-no.mp3"
    },
    {
      title:"Hot üî•",
      bg:"linear-gradient(135deg,#ffd6e0,#ff9ecf)",
      intro:"Things heat up üòè",
      questions:["Hot Q1","Hot Q2","Hot Q3","Hot Q4"],
      yesImage:"Images/hot-yes.jpg",
      yesAudio:"Audio/hot-yes.mp3",
      noImage:"Images/hot-no.jpg",
      noAudio:"Audio/hot-no.mp3"
    },
    {
      title:"Spicy üå∂Ô∏è",
      bg:"linear-gradient(135deg,#ffb3c6,#ff4d6d)",
      intro:"Secret zone üòà",
      passcode:"1234",
      hint:"Something obvious ‚ù§Ô∏è",
      wrongMessage:"Nope üòú Try again",
      questions:["Spicy Q1","Spicy Q2","Spicy Q3","Spicy Q4"],
      yesImage:"Images/spicy-yes.jpg",
      yesAudio:"Audio/spicy-yes.mp3",
      noImage:"Images/spicy-no.jpg",
      noAudio:"Audio/spicy-no.mp3"
    }
  ],
  finalMessage:"You made it ‚ù§Ô∏è",
  finalImages:[
    "Images/image1.jpg",
    "Images/image2.jpg",
    "Images/image3.jpg",
    "Images/image4.jpg",
    "Images/image5.jpg"
  ],
  finalYesImage:"Images/final-yes.jpg",
  finalYesAudio:"Audio/final-yes.mp3",
  noClickMessages:["Oops üòú","Wrong heart üíò","Try YES üòè"]
};

let section=0,question=0,mode="intro",autoScrollTimer=null;
const history=[];
const screen=document.getElementById('screen');
const backBtn=document.getElementById('backBtn');

const yesBtn=document.createElement('button');
yesBtn.id='yesBtn'; yesBtn.className='primary'; yesBtn.textContent='YES üíñ';

const noBtn=document.createElement('button');
noBtn.id='noBtn'; noBtn.className='secondary'; noBtn.textContent='NO üòÖ';

function toggleDark(){document.body.classList.toggle('dark')}
function setBG(){if(!document.body.classList.contains('dark'))document.body.style.background=SITE.sections[section]?.bg||"#fff"}

function playEffect(img, audio){
  if(audio){ new Audio(audio).play().catch(()=>{}); }
  if(img){
    const i=document.createElement('img');
    i.src=img;
    i.className='popup-img';
    document.body.appendChild(i);
    setTimeout(()=>i.remove(),3000);
  }
}

function save(){history.push({section,question,mode});backBtn.classList.remove('hidden')}
backBtn.onclick=()=>{
  if(!history.length)return;
  const h=history.pop();
  section=h.section;question=h.question;mode=h.mode;
  render();
  if(!history.length)backBtn.classList.add('hidden');
};

function render(){
  setBG();
  if(mode==="intro")renderIntro();
  else if(mode==="question")renderQuestion();
  else if(mode==="password")renderPassword();
  else renderFinal();
}

function renderIntro(){
  screen.innerHTML=`<h1>${SITE.sections[section].title}</h1><p>${SITE.sections[section].intro}</p><button class="primary" onclick="startQuestions()">Continue</button>`;
}

function startQuestions(){save();question=0;mode="question";render()}

function renderQuestion(){
  screen.innerHTML=`<h1>${SITE.sections[section].questions[question]}</h1><div class="buttons"></div>`;
  const box=screen.querySelector('.buttons');
  box.append(yesBtn,noBtn);
  resetButtons();
  bindButtons();
}

function renderPassword(){
  const s=SITE.sections[section];
  screen.innerHTML=`<h1>üîê Enter Password</h1><p>${s.hint}</p>
  <input id="pw" style="width:100%;padding:12px;border-radius:10px;border:1px solid #ccc">
  <p id="err" style="color:#ff4d6d"></p>
  <button class="primary" onclick="checkPw()">Unlock</button>`;
}

function renderFinal(){
  mode="final";
  screen.innerHTML=`<h1>${SITE.finalMessage}</h1>
  <div class="final-scroll" id="scrollBox">
    ${SITE.finalImages.map(i=>`<img src="${i}">`).join("")}
  </div>`;

  playEffect(SITE.finalYesImage, SITE.finalYesAudio);

  const box=document.getElementById('scrollBox');
  let pause=false;
  box.addEventListener('touchstart',()=>pause=true);
  box.addEventListener('touchend',()=>pause=false);

  autoScrollTimer=setInterval(()=>{
    if(!pause){
      box.scrollTop+=1;
      if(box.scrollTop+box.clientHeight>=box.scrollHeight)box.scrollTop=0;
    }
  },40);
}

function bindButtons(){
  yesBtn.onclick=()=>{
    const s=SITE.sections[section];
    playEffect(s.yesImage,s.yesAudio);
    save(); question++;
    if(question<4){render();return;}
    section++;question=0;
    if(section>=SITE.sections.length){renderFinal();return;}
    SITE.sections[section].passcode?renderPassword():renderIntro();
  };

  noBtn.onclick=()=>{
    const s=SITE.sections[section];
    playEffect(s.noImage,s.noAudio);
    toast(SITE.noClickMessages[Math.random()*SITE.noClickMessages.length|0]);
    moveNo();
  };
}

function checkPw(){
  if(document.getElementById('pw').value!==SITE.sections[section].passcode){
    document.getElementById('err').textContent=SITE.sections[section].wrongMessage;
    return;
  }
  save();question=0;render();
}

function resetButtons(){
  yesBtn.style.transform='translate(-120%,-50%)';
  noBtn.style.transform='translate(20%,-50%)';
}

function moveNo(){
  const b=noBtn.parentElement;
  const r=60+Math.random()*40,a=Math.random()*Math.PI*2;
  noBtn.style.left=(b.clientWidth/2+r*Math.cos(a))+'px';
  noBtn.style.top=(b.clientHeight/2+r*Math.sin(a))+'px';
}

function toast(m){
  const t=document.createElement('div');
  t.className='toast';t.textContent=m;
  document.body.appendChild(t);
  setTimeout(()=>t.remove(),2000);
}

renderIntro();
</script>

</body>
</html>